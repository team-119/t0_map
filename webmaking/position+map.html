<!DOCTYPE html>
<html>
    <head>
        <title> 위치추적+지도 </title>
        <script	src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
        <script src="https://apis.openapi.sk.com/tmap/jsv2?version=2&appKey=l7xxf6a3bebd3c3b4d69bdbd799bc288845d"></script> <!--version2로 슬쩍수정-->
        <script type="text/javascript">

            var map;
            var my = {lat: 37.9504963, lon: 127.02928809999999}; //내좌표

            function Main()
            {   

                // 1. HTML5의 geolocation 사용해 좌표 로딩    
                if(navigator.geolocation)
                {
                    navigator.geolocation.getCurrentPosition(function(position)
                    {
                        my.lat = position.coords.latitude;
                        my.lon = position.coords.longitude;

                        document.getElementById("location").innerHTML = // 위도경도 출력
                        "Latitude: " + my.lat + "<br>" +
                        "Longitude: " + my.lon;

                        // 2. 지도 띄우기
                        map = new Tmapv2.Map("map_div", {
                            center : new Tmapv2.LatLng(my.lat, my.lon),
                            width : "80%",
                            height : "400px",
                            zoom : 11,
                            zoomControl : true,
                            scrollwheel : true
                        });

                        // 3. 마커 띄우기
                        marker_s = new Tmapv2.Marker(
                                {
                                    position : new Tmapv2.LatLng(my.lat, my.lon),
                                    icon : "http://tmapapis.sktelecom.com/upload/tmap/marker/pin_r_m_s.png",
                                    iconSize : new Tmapv2.Size(24, 38),
                                    map : map
                                });

                    }); // getCurrentPosition [E]

                } // if(navigator.geolocation) [E]

            }   // Main [E]

        </script>
    </head>

    <body onload="Main()">
        <h1> 현위치 마커찍기 </h1>
        <div id="map_div"></div>
        <p id="location"></p>
    </body>
</html>